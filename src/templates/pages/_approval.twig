{% extends 'base.twig' %}

{% block pagetitle %}Approval{% endblock %}

{% block content %}
{% include 'components/_header.twig' %}
<div id="page-wrapper">
	<div class="row">
		<div class="col-lg-12">
			<h1 class="page-header">Approval</h1>
			<form action="#" class="page-form form-inline hidden-xs" method="GET">
				<div class="form-group">
					<label for="status">Filter:</label>
					<select class="form-control" name="filter" id="status" onchange='this.form.submit()'>
						<option value="none" {% if selected == 'none' %}selected{% endif %}>No Filter</option>
						<option value="pending" {% if selected == 'pending' %}selected{% endif %}>Pending</option>
						<option value="approved" {% if selected == 'approved' %}selected{% endif %}>Approved</option>
					</select>
				</div>
				<noscript><input type="submit" class="form-control btn btn-primary" value="Filter"></noscript>
			</form>
			{% include 'components/widgets/_breadcrumb.twig' %}
		</div>
	</div>
	<div class="row">
		{% if filtered %}
			{% set filter = results %}
		{% else %}
			{% set filter = results %}
		{% endif %}
		{% if filter is empty %}
		<div class="col-lg-12">
			<div class="list-group">
				<div class="list-group-item well">
					<h4 class="list-group-item-heading">Maaf, Tidak ada hasil untuk filter <code>`{{ selected }}`</code></h4>
					<p class="list-group-item-text">Filter yang anda berikan tidak membuahkan hasil. Coba ganti atau hilangkan filter dengan memilih tombol dibawah</p>
					<br>
					<a href="/approval" class="btn btn-large btn-success"><i class="fa fa-plus"> <strong>Kembali</strong></i></a>
				</div>
			</div>
		</div>
		{% else %}
		<div class="col-lg-12">
			<div class="list-group">
				{% for result in results %}
				<div class="list-group-item complex-list">
					<div class="row">
						<div class="col-md-6">
							<h3 class="list-group-item-heading">{{ result.NamaMatkul }} <small>Versi {{ result.Versi }}</small></h3>
						</div>
						<div class="col-md-6">
							<div class="btn-group btn-group-sm pull-right">
								<a href="/review/{{ result.KDMataKuliah }}" target="_blank" class="btn btn-primary">Review</a>
								{% if result.Approval == '0' %}
								<button type="button" data-toggle="dropdown" aria-expanded="false" class="btn btn-primary dropdown-toggle">
									Action
									<span class="caret"></span>
								</button>
								<ul class="dropdown-menu" role="menu">
									<li><a href="{{ currPath }}/{{ result.ID_Approval }}/approve?{{ result.KDMataKuliah }}">Approve</a></li>
									<li><a href="{{ currPath }}/{{ result.ID_Approval }}/reject?{{ result.KDMataKuliah }}">Reject</a></li>
								</ul>
								{% endif %}
							</div>
						</div>
					</div>
					<hr>
					<div class="row">
						<div class="col-sm-4 list-group-item-text text-center box">
							<strong class="text-muted box-component box-title">Dosen</strong>
							<span class="box-component box-content"><i class="fa fa-user fa-fw"></i> {{ result.NamaDosen|length > 15 ? result.NamaDosen|slice(0, 15) ~ ' ...' : result.NamaDosen }}</span>
						</div>
						<div class="col-sm-4 list-group-item-text text-center box">
							<strong class="text-muted box-component box-title">Periode</strong>
							<span class="box-component box-content"><i class="fa fa-briefcase fa-fw"></i> Semester {{ result.Semester }}/{{ result.Tahun }}</span>
						</div>
						<div class="col-sm-4 list-group-item-text text-center box">
							<strong class="text-muted box-component box-title">Waktu Submit</strong>
							<span class="box-component box-content" data-moment-render><i class="fa fa-clock-o fa-fw"></i> {{ result.TglMasuk }}</span>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
		{% endif %}
	</div>
</div>
{% endblock %}
